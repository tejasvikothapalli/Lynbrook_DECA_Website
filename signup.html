<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://www.parsecdn.com/js/parse-1.4.2.min.js"></script>

    <!--Fonts-->
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>

    <!--Stylesheets-->
	<link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
	<link rel="stylesheet" href="css/design.css"> <!-- Resource style -->

    <!--Script-->
	<script src="js/modernizr.js"></script> <!-- Modernizr -->
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js" ></script>

	<script > 
    	Parse.initialize("kScQXRCZFHxkzilbr6loKIKO2hxt7lcKom9DWKRD", "R0gxChWChXhekNDydkGcxGCLfZndbw3H6dQSUHgr");
    </script>
    

	<title>Lynbrook DECA</title>

    <link rel="icon" href="img/favico.png"></link>
</head>

<body style="background-color:whitesmoke">
	<header class="header">
		
		<div id="navbarlogo">
            <a href="index.html"><img src="img/favico.png" height="30px" /></a>
        </div>
        
        <div id="lynbrookdeca">
        	<p><a href="index.html">Lynbrook DECA</a></p> 
        </div>
        
        <nav class="navbar">
			<ul>
				<li><a href="index.html">HOME</a></li>
				<li><a href="about.html">ABOUT</a></li>
				<li><a href="calendar.html">CALENDAR</a></li>
				<li><a href="events.html">EVENTS</a></li>
                <li><a href="conferences.html" style="border-right:1px solid black">CONFERENCES</a></li>
                <button class="login-button">LOG IN</button>
                <button class="signup-button" onclick="window.location='signup.html';">SIGN UP</button>
			</ul>
		</nav>
		
	</header>
	
	<main class="main-content" style="margin-bottom:0">
		
		<div class="title-up">
			<h1>
                <span>Sign Up</span>
            </h1>
		</div>

		<form id="msform">
			<!-- progressbar -->
			<ul id="progressbar">
				<li class="active">Step 1</li>
				<li>Step 2</li>
				<li>Step 3</li>
				<li>Step 4</li>
			</ul>

			<!-- fieldsets -->
			<fieldset>
				<h2 class="fs-title">What's your name?</h2>
				<h3 class="fs-subtitle">Tell us who you are</h3>
				<div id="wynmistakes" class="errormessages"></div>
				<input type="text" name="firstname" placeholder="First Name" id="fname"/>
				<input type="text" name="lastname" placeholder="Last Name" id="lname"/>
				<input type="button" name="next" class="next1 action-button" value="Next" />
				<p style="text-align:center;margin-top:20px;font-size:125%">Already a member? <a href="#" style="color:#1F3A93;text-decoration:none">Log in!</a></p>
			</fieldset>
			<fieldset>
				<h2 class="fs-title">Personal Information</h2>
				<h3 class="fs-subtitle">We promise not to sell it</h3>
				<div id="pimistakes" class="errormessages"></div>
				<input type="tel" name="cellname" placeholder="Cell Phone (###-###-####)" id="cellphone"/>
				<input type="number" name="grade" placeholder="Current grade (9-12)" id="currentgrade"/>
				<input type="number" name="years" placeholder="Year in DECA (1-4)" id="yearindeca"/>
				<input type="button" name="previous" class="previous action-button" value="Previous" />
				<input type="button" name="next" class="next2 action-button" value="Next" />
				<p style="text-align:center;margin-top:20px;font-size:125%">Already a member? <a href="#" style="color:#1F3A93;text-decoration:none">Log in!</a></p>
			</fieldset>
			<fieldset>
				<h2 class="fs-title">Account Details</h2>
				<h3 class="fs-subtitle">How you will sign in</h3>
				<div id="admistakes" class="errormessages"></div>
				<input type="text" name="email" placeholder="Email" id="email"/>
				<input type="password" name="password" placeholder="Password" id="password"/>
				<input type="password" name="confirmpassword" placeholder="Confirm Password" id="confirmpassword"/>
				<input type="button" name="previous" class="previous action-button" value="Previous" />
				<input type="button" name="next" class="next3 action-button" value="Next" />
				<p style="text-align:center;margin-top:20px;font-size:125%">Already a member? <a href="#" style="color:#1F3A93;text-decoration:none">Log in!</a></p>
			</fieldset>
			<fieldset>
				<h2 class="fs-title">Club Password</h2>
				<h3 class="fs-subtitle">What's the magic word?</h3>
				<div id="cpmistakes" class="errormessages"></div>
				<input type="text" name="clubpassword" placeholder="Club Password" id="clubpassword"/>
				<input type="button" name="previous" class="previous action-button" value="Previous" />
				<input type="submit" name="submit" class="submit action-button" value="Submit" id ="signupsubmit"/>
				<p style="text-align:center;margin-top:20px;font-size:125%">Already a member? <a href="#" style="color:#1F3A93;text-decoration:none">Log in!</a></p>
			</fieldset>

		</form>

		<script>
			var current_fs, next_fs, previous_fs; //fieldsets
			var left, opacity, scale; //fieldset properties which we will animate
			var animating; //flag to prevent quick multi-click glitches
			var fnameok=false;
			var lnameok=false;
			var cellok=false;
			var gradeok=false;
			var yearindecaok=false;
			var emailok=false;
			var passwordsmatch=false;
			var clubpasswordok=false;
			var clubpassword="epicdiamonds"
			var error1="";
			var error2="";
			var error3="";
			var error4="";
			$(".next1").click(function(event){
				var error1="";
				fnameok=false;
				lnameok=false;
				$("#wynmistakes").html(error1);
				if ($("#fname").val()!="")
				{
					fnameok=true;
				} else {
					error1+="Please enter your first name.<br>";
				}
				if ($("#lname").val()!="")
				{
					lnameok=true;
				} else {
					error1+="Please enter your last name.<br>";
				}
				if (fnameok && lnameok) {
					if(animating) return false;
					animating = true;
					current_fs = $(this).parent();
					next_fs = $(this).parent().next();
					
					//activate next step on progressbar using the index of next_fs
					$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
					
					//show the next fieldset
					next_fs.show(); 
					//hide the current fieldset with style
					current_fs.animate({opacity: 0}, {
						step: function(now, mx) {
							//as the opacity of current_fs reduces to 0 - stored in "now"
							//1. scale current_fs down to 80%
							scale = 1 - (1 - now) * 0.2;
							//2. bring next_fs from the right(50%)
							left = (now * 50)+"%";
							//3. increase opacity of next_fs to 1 as it moves in
							opacity = 1 - now;
							current_fs.css({'transform': 'scale('+scale+')'});
							next_fs.css({'left': left, 'opacity': opacity});
						}, 
						duration: 800, 
						complete: function(){
							current_fs.hide();
							animating = false;
						}, 
						//this comes from the custom easing plugin
						easing: 'easeInOutBack'
					});
				} else {
					error1+="<br>";
					$("#wynmistakes").html(error1);
				}
			});
			$(".next2").click(function(){
				error2="";
				cellok=false;
				gradeok=false;
				yearindecaok=false;
				$("#pimistakes").html(error2);
				function isvalidphonenumber(inputtxt)  
				{  
					var phoneno = new RegExp(/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/);
					var phonenoo = new RegExp(/^\d{10}$/);
					if (phoneno.test(inputtxt)) {
						return true;
					} else if (phonenoo.test(inputtxt)) {
						return true;
					} else {
						return false;
					}
				}
				if (isvalidphonenumber($("#cellphone").val())) {
					cellok=true;
				} else {
					error2+="Please enter a valid 10-digit phone number like ###-###-####.<br>"
				}
				if ($("#currentgrade").val() < 9 || $("#currentgrade").val() > 12) {
					error2+="Your grade must be between 9 and 12.<br>"
				} else {
					gradeok=true;
				}
				if ($("#yearindeca").val() < 1 || $("#yearindeca").val() > 4) {
					error2+="Your year in DECA must be between 1 and 4.<br>"
				} else {
					yearindecaok=true;
				}
				if (cellok && gradeok && yearindecaok) {
					if(animating) return false;
					animating = true;
					current_fs = $(this).parent();
					next_fs = $(this).parent().next();
					
					//activate next step on progressbar using the index of next_fs
					$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
					
					//show the next fieldset
					next_fs.show(); 
					//hide the current fieldset with style
					current_fs.animate({opacity: 0}, {
						step: function(now, mx) {
							//as the opacity of current_fs reduces to 0 - stored in "now"
							//1. scale current_fs down to 80%
							scale = 1 - (1 - now) * 0.2;
							//2. bring next_fs from the right(50%)
							left = (now * 50)+"%";
							//3. increase opacity of next_fs to 1 as it moves in
							opacity = 1 - now;
							current_fs.css({'transform': 'scale('+scale+')'});
							next_fs.css({'left': left, 'opacity': opacity});
						}, 
						duration: 800, 
						complete: function(){
							current_fs.hide();
							animating = false;
						}, 
						//this comes from the custom easing plugin
						easing: 'easeInOutBack'
					});
				} else {
					error2+="<br>";
					$("#pimistakes").html(error2);
				}
			});
			$(".next3").click(function(){
				error3="";
				emailok=false;
				passwordsmatch=false;
				$("#admistakes").html(error3);
				function isValidEmailAddress(emailAddress) {
			    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
			    return pattern.test(emailAddress);
				};
				if ( isValidEmailAddress($("#email").val()) )
				{
					// var tmpemail = $("#email").val();
					// var query = new Parse.Query(Parse.User);
					// query.equalTo("username", tmpemail);  // find all the women
					// query.find({
	  		// 			  success: function(foundusers) {
	    // 				  	// emailok = false;
	  		// 			  	error3+="Please enter a valid email address.<br>";
	  		// 			  	alert("success");
	  		// 			  },
	  		// 			  error: function(object, error) {
	  		// 			  	emailok=true;
	  		// 			  	alert("fail");
	  		// 			  }

					// });
					// alert("done");

					//TODO (check if email is already being used.)

					emailok=true;
				} else {
					error3+="Please enter a valid email address.<br>";
				}
				if ($("#password").val()=="") {
					error3+="Please enter a password.<br>";
				} else if ($("#confirmpassword").val()=="") {
					error3+="Please confirm your password.<br>";
				} else if ($('#password').val() != $('#confirmpassword').val()) {
					error3+="Your passwords don't match.<br>";
				} else {
					passwordsmatch=true;
				}
				if (emailok && passwordsmatch) {
					if(animating) return false;
					animating = true;
					current_fs = $(this).parent();
					next_fs = $(this).parent().next();
					
					//activate next step on progressbar using the index of next_fs
					$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
					
					//show the next fieldset
					next_fs.show(); 
					//hide the current fieldset with style
					current_fs.animate({opacity: 0}, {
						step: function(now, mx) {
							//as the opacity of current_fs reduces to 0 - stored in "now"
							//1. scale current_fs down to 80%
							scale = 1 - (1 - now) * 0.2;
							//2. bring next_fs from the right(50%)
							left = (now * 50)+"%";
							//3. increase opacity of next_fs to 1 as it moves in
							opacity = 1 - now;
							current_fs.css({'transform': 'scale('+scale+')'});
							next_fs.css({'left': left, 'opacity': opacity});
						}, 
						duration: 800, 
						complete: function(){
							current_fs.hide();
							animating = false;
						}, 
						//this comes from the custom easing plugin
						easing: 'easeInOutBack'
					});
				} else {
					error3+="<br>";
					$("#admistakes").html(error3);
				}
			});

			$("#signupsubmit").click(function(event) {
				event.preventDefault();
				error4="";
				clubpasswordok=false;
				$("#cpmistakes").html(error4);
				if ($('#clubpassword').val() != clubpassword) {
					error4+="That isn't the club password.<br>";
				} else {
					clubpasswordok=true;
					// alert("hello1");
					signupfunction();
				}
				if (!clubpasswordok) {
					error4+="<br>";
					$("#cpmistakes").html(error4);
				}
			});

			$(".previous").click(function(){
				if(animating) return false;
				animating = true;
				
				current_fs = $(this).parent();
				previous_fs = $(this).parent().prev();
				
				//de-activate current step on progressbar
				$("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
				
				//show the previous fieldset
				previous_fs.show(); 
				//hide the current fieldset with style
				current_fs.animate({opacity: 0}, {
					step: function(now, mx) {
						//as the opacity of current_fs reduces to 0 - stored in "now"
						//1. scale previous_fs from 80% to 100%
						scale = 0.8 + (1 - now) * 0.2;
						//2. take current_fs to the right(50%) - from 0%
						left = ((1-now) * 50)+"%";
						//3. increase opacity of previous_fs to 1 as it moves in
						opacity = 1 - now;
						current_fs.css({'left': left});
						previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
					}, 
					duration: 800, 
					complete: function(){
						current_fs.hide();
						animating = false;
					}, 
					//this comes from the custom easing plugin
					easing: 'easeInOutBack'
				});
			});


		</script>

		<script src="http://thecodeplayer.com/uploads/js/jquery-1.9.1.min.js" type="text/javascript"></script>
		<script src="http://thecodeplayer.com/uploads/js/jquery.easing.min.js" type="text/javascript"></script>

	    <div class="scrolling-line line-color"></div>
		
		<!-- Footer w/Sitemap -->
        <div class="scrolling-footer footer-color">
            <h3>Sitemap</h3>
            <p>
                <a href="home.html">Home</a> | 
                <a href="about.html">About</a> | 
                <a href="calendar.html">Calendar</a> | 
                <a href="events.html">Events</a> | 
                <a href="conferences.html">Conferences</a>
            </p>
			<div class="container">
				<p>&copy 2015 Lynbrook DECA</p>
			</div>
		</div>
		
	</main>
	<script>


	// $("#msform").submit(function(){
	// 	alert("Submitted");
	// 	signupfunction();
	// });

	// $("#signupsubmit").click(function(){
	// 	alert("Submitted");
	// 	signupfunction();
	// });


	function signupfunction() {

		if (clubpasswordok)
		{
			// alert("signupfunction submitted");

			var firstname = $("#fname").val();

			var lastname = $("#lname").val();

			var cellphone = $("#cellphone").val();

			var currentgrade = $("#currentgrade").val();

			var yearindeca = $("yearindeca").val();

			var email = $("#email").val();

			var password = $("#password").val();



			// alert(email + lastname + firstname + email + currentgrade);
			var user = new Parse.User();


			// other fields can be set just like with Parse.Object
			user.set("username", email);
			user.set("email", email);
			user.set("password", password);

			user.set("firstname", firstname);
			user.set("lastname", lastname);
			
			user.set("phone", cellphone);
			user.set("currentgrade", currentgrade);
			user.set("yearindeca", yearindeca);
			

			

			user.signUp(null, {
				success: function(user) {
			    // Hooray! Let them use the app now.
			    // alert("sign it worked");
			    window.location.href='dashboard.html';
			},
			error: function(user, error) {
			    // Show the error message somewhere and let the user try again.
			    alert("Error: " + error.code + " " + error.message);
			}
		});

		}
	}


	</script>
</body>
</html>